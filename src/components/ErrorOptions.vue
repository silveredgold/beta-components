<template>
<n-card title="Error Display Preferences" size="small">
        <!-- <template #header-extra>Backend Host</template> -->
        <div>
            
            <n-radio-group v-model:value="prefs.errorMode" name="left-size" size="small" style="margin-bottom: 12px;">
            <template v-for="opt in ['Subtle', 'Normal']" v-bind:key="opt">
                <n-radio-button :value="opt.toLowerCase()">{{opt}}</n-radio-button>
            </template>
            </n-radio-group>
        </div>
        <template #footer>
            <!-- <p>{{mode}}</p> -->
            Subtle will show a subtler SFW placeholder when censoring fails, while Normal will show an NSFW image instead.
        </template>
    </n-card>
</template>
<script setup lang="ts">
import { watch, toRefs, inject } from 'vue';
import { NCard, NRadioGroup, NRadioButton } from "naive-ui";
import { IPreferences } from '@silveredgold/beta-shared/preferences';
import { updateUserPrefs } from '../messaging';
import { PreferencesProps } from '.';

const props = defineProps<PreferencesProps>();


const { preferences } = toRefs(props);
const prefs = preferences;
const updatePrefs = inject(updateUserPrefs, undefined);

watch(prefs, async (newMode, prevMode) => {
    updatePrefs?.();
}, {deep: true});

</script>